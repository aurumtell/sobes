<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">
    <!-- ChangeSet for creating the Users table -->
    <changeSet id="2023-01-user-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS users (
                id SERIAL PRIMARY KEY,
                username VARCHAR(225) NOT NULL,
                email VARCHAR(225) NOT NULL UNIQUE,
                passwordHash VARCHAR(225) NOT NULL,
                registrationDate TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NOW()
            );
        </sql>
    </changeSet>

    <changeSet id="refresh-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS refresh (
                id SERIAL PRIMARY KEY,
                userId INTEGER,
                token TEXT,
                expiryDate TEXT,
                FOREIGN KEY (userId) REFERENCES users(id)
            )
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the Profiles table -->

    <!-- ChangeSet for creating the Professions table -->
    <changeSet id="2023-04-professions-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS professions (
               id SERIAL PRIMARY KEY,
               profession VARCHAR(255) NOT NULL
            );
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the Levels table -->
    <changeSet id="2023-05-levels-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS levels (
              id SERIAL PRIMARY KEY,
              employeeLevel VARCHAR(255) NOT NULL
            );
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the Companies table -->
    <changeSet id="2023-06-companies-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS companies (
              id SERIAL PRIMARY KEY,
              companyName VARCHAR(255) NOT NULL
            );
        </sql>
    </changeSet>

    <changeSet id="profiles-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS profiles (
                id SERIAL PRIMARY KEY,
                userId INTEGER NOT NULL,
                professionId INTEGER,
                levelId INTEGER,
                FOREIGN KEY (userId) REFERENCES users(id),
                FOREIGN KEY (professionId) REFERENCES professions(id),
                FOREIGN KEY (levelId) REFERENCES levels(id)
                );
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the UserCompanies table -->
    <changeSet id="2023-07-usercompanies-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS user_companies (
                userId INTEGER NOT NULL,
                companyId INTEGER NOT NULL,
                FOREIGN KEY (userId) REFERENCES users(id),
                FOREIGN KEY (companyId) REFERENCES companies(id)
                );
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the Articles table -->
    <changeSet id="2023-08-articles-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS articles (
                id SERIAL PRIMARY KEY,
                professionId INTEGER NOT NULL,
                image VARCHAR(255),
                title VARCHAR(255) NOT NULL,
                author VARCHAR(255),
                content TEXT NOT NULL,
                link VARCHAR(255),
                FOREIGN KEY (professionId) REFERENCES professions(id)
                );
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the Advices table -->
    <changeSet id="2023-09-advices-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS advices (
                id SERIAL PRIMARY KEY,
                companyIconUrl VARCHAR(255),
                professionId INTEGER NOT NULL,
                employeeName VARCHAR(255) NOT NULL,
                employeeLevel VARCHAR(255),
                text TEXT NOT NULL,
                FOREIGN KEY (professionId) REFERENCES professions(id)
                );
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the QuestionSets table -->
    <changeSet id="2023-11-questionsets-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS question_sets (
                id SERIAL PRIMARY KEY,
                userId INTEGER NOT NULL,
                setNumber INTEGER NOT NULL,
                dateAccessed TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NOW(),
                FOREIGN KEY (userId) REFERENCES users(id)
            );
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the Questions table -->
    <changeSet id="2023-10-questions-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS questions (
               id SERIAL PRIMARY KEY,
               setId INTEGER NOT NULL,
               userId INTEGER NOT NULL,
               content TEXT NOT NULL,
               professionId INTEGER,
               FOREIGN KEY (setId) REFERENCES question_sets(id),
               FOREIGN KEY (userId) REFERENCES users(id),
               FOREIGN KEY (professionId) REFERENCES professions(id)
            );
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the Interviews table -->
    <changeSet id="2023-12-interviews-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS interviews (
                id SERIAL PRIMARY KEY,
                questionId INTEGER NOT NULL,
                chatGPTResponseImprovement TEXT,
                idealnessScore INTEGER NOT NULL,
                responseCompleteness INTEGER NOT NULL,
                responseSatisfaction INTEGER NOT NULL,
                overallScore INTEGER NOT NULL,
                FOREIGN KEY (questionId) REFERENCES questions(id)
            );
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the InterviewDialogs table -->
    <changeSet id="2023-13-interviewdialogs-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS interview_dialogs (
                id SERIAL PRIMARY KEY,
                interviewId INTEGER NOT NULL,
                senderType VARCHAR(50),
                messageContent TEXT,
                interviewDate TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NOW(),
                FOREIGN KEY (interviewId) REFERENCES interviews(id)
            );
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the Chats table -->
    <changeSet id="2023-14-chats-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS chats (
                id SERIAL PRIMARY KEY,
                participantOneId INTEGER NOT NULL,
                participantTwoId INTEGER NOT NULL,
                FOREIGN KEY (participantOneId) REFERENCES users(id),
                FOREIGN KEY (participantTwoId) REFERENCES users(id)
            );
        </sql>
    </changeSet>

    <!-- ChangeSet for creating the Messages table -->
    <changeSet id="2023-15-messages-table-creation" author="dayana">
        <sql>
            CREATE TABLE IF NOT EXISTS messages (
                id SERIAL PRIMARY KEY,
                chatId INTEGER NOT NULL,
                senderId INTEGER NOT NULL,
                content TEXT,
                dateMessage TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NOW(),
                FOREIGN KEY (chatId) REFERENCES chats(id),
                FOREIGN KEY (senderId) REFERENCES users(id)
            );
        </sql>
    </changeSet>

</databaseChangeLog>